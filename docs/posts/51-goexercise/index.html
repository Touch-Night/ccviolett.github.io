<!DOCTYPE html>
<html lang="zh-cn">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="zh-cn" http-equiv="Content-Language"/>
<meta content="light dark" name="color-scheme"/>
<meta content="ç½—æ½‡é˜³" name="author"/>
<meta content='go å®˜æ–¹çš„å¾ˆå¥½çš„å…¥é—¨æ•™ç¨‹ï¼šGo è¯­è¨€ä¹‹æ—…
è¿™é‡Œæ˜¯æˆ‘åšçš„æ‰€æœ‰çš„ç»ƒä¹ 
å¾ªç¯ä¸å‡½æ•°    package main import ( "fmt" "math" ) func Sqrt(x float64) float64 { z := float64(1) for i := 1; i &lt;= 10; i++ { change := (z * z - x) / (2 * z) if math.Abs(change) &lt; 1e-13 { break } z -= change } return z } func main() { fmt.Println(Sqrt(2)) fmt.Println(math.Sqrt(2)) } åˆ‡ç‰‡    package main import "golang.' name="description"/>
<meta content="åšå®¢,å¼€å‘è€…,ä¸ªäºº" name="keywords"/>
<meta content="summary" name="twitter:card"/>
<meta content="Go è¯­è¨€ä¹‹æ—…ä¸­çš„ç»ƒä¹ " name="twitter:title"/>
<meta content='go å®˜æ–¹çš„å¾ˆå¥½çš„å…¥é—¨æ•™ç¨‹ï¼šGo è¯­è¨€ä¹‹æ—…
è¿™é‡Œæ˜¯æˆ‘åšçš„æ‰€æœ‰çš„ç»ƒä¹ 
å¾ªç¯ä¸å‡½æ•°    package main import ( "fmt" "math" ) func Sqrt(x float64) float64 { z := float64(1) for i := 1; i &lt;= 10; i++ { change := (z * z - x) / (2 * z) if math.Abs(change) &lt; 1e-13 { break } z -= change } return z } func main() { fmt.Println(Sqrt(2)) fmt.Println(math.Sqrt(2)) } åˆ‡ç‰‡    package main import "golang.' name="twitter:description"/>
<meta content="Go è¯­è¨€ä¹‹æ—…ä¸­çš„ç»ƒä¹ " property="og:title"/>
<meta content='go å®˜æ–¹çš„å¾ˆå¥½çš„å…¥é—¨æ•™ç¨‹ï¼šGo è¯­è¨€ä¹‹æ—…
è¿™é‡Œæ˜¯æˆ‘åšçš„æ‰€æœ‰çš„ç»ƒä¹ 
å¾ªç¯ä¸å‡½æ•°    package main import ( "fmt" "math" ) func Sqrt(x float64) float64 { z := float64(1) for i := 1; i &lt;= 10; i++ { change := (z * z - x) / (2 * z) if math.Abs(change) &lt; 1e-13 { break } z -= change } return z } func main() { fmt.Println(Sqrt(2)) fmt.Println(math.Sqrt(2)) } åˆ‡ç‰‡    package main import "golang.' property="og:description"/>
<meta content="article" property="og:type"/>
<meta content="http://ccviolett.github.io/posts/51-goexercise/" property="og:url"/><meta content="posts" property="article:section"/>
<meta content="2022-05-06T16:18:24+08:00" property="article:published_time"/>
<meta content="2022-05-06T16:18:24+08:00" property="article:modified_time"/>
<title>
  Go è¯­è¨€ä¹‹æ—…ä¸­çš„ç»ƒä¹  Â· ç½—æ½‡é˜³çš„åšå®¢
</title>
<link href="http://ccviolett.github.io/posts/51-goexercise/" rel="canonical"/>
<link as="font" crossorigin="" href="/fonts/forkawesome-webfont.woff2?v=1.2.0" rel="preload" type="font/woff2"/>
<link crossorigin="anonymous" href="/css/coder.min.728f45c9eaff821acb9cccdb60c81cf16be81bd890ee22cc5b5f4dbf276a082f.css" integrity="sha256-co9Fyer/ghrLnMzbYMgc8WvoG9iQ7iLMW19NvydqCC8=" media="screen" rel="stylesheet"/>
<link crossorigin="anonymous" href="/css/coder-dark.min.aa883b9ce35a8ff4a2a5008619005175e842bb18a8a9f9cc2bbcf44dab2d91fa.css" integrity="sha256-qog7nONaj/SipQCGGQBRdehCuxioqfnMK7z0Tastkfo=" media="screen" rel="stylesheet"/>
<link href="/images/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"/>
<link href="/images/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"/>
<link href="/images/apple-touch-icon.png" rel="apple-touch-icon"/>
<link href="/images/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"/>
<meta content="Hugo 0.92.0" name="generator"/>
</head>
<body class="preload-transitions colorscheme-auto">
<div class="float-container">
<a class="colorscheme-toggle" id="dark-mode-toggle">
<i aria-hidden="true" class="fa fa-adjust fa-fw"></i>
</a>
</div>
<main class="wrapper">
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?90bcdb8127c31d4d27ebb95576bc8474";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-228764760-1">
</script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-228764760-1');
</script>
<nav class="navigation">
<section class="container">
<a class="navigation-title" href="/">
      ç½—æ½‡é˜³çš„åšå®¢
    </a>
<input id="menu-toggle" type="checkbox"/>
<label class="menu-button float-right" for="menu-toggle">
<i aria-hidden="true" class="fa fa-bars fa-fw"></i>
</label>
<ul class="navigation-list">
<li class="navigation-item">
<a class="navigation-link" href="/">é¦–é¡µ</a>
</li>
<li class="navigation-item">
<a class="navigation-link" href="/posts/">æ–‡ç« </a>
</li>
<li class="navigation-item">
<a class="navigation-link" href="/solution/">é¢˜è§£</a>
</li>
<li class="navigation-item">
<a class="navigation-link" href="/contact/">è”ç³»</a>
</li>
<li class="navigation-item">
<a class="navigation-link" href="/about/">å…³äº</a>
</li>
<li class="navigation-item">
<a class="navigation-link" href="/support/">èµåŠ©</a>
</li>
<li class="navigation-item menu-separator">
<span>|</span>
</li>
<li class="navigation-item">
<a href="http://ccviolett.github.io/en/">ğŸ‡¬ğŸ‡§</a>
</li>
</ul>
</section>
</nav>
<div class="content">
<section class="container post">
<article>
<header>
<div class="post-title">
<h1 class="title">
<a class="title-link" href="http://ccviolett.github.io/posts/51-goexercise/">
              Go è¯­è¨€ä¹‹æ—…ä¸­çš„ç»ƒä¹ 
            </a>
</h1>
</div>
<div class="post-meta">
<div class="date">
<span class="posted-on">
<i aria-hidden="true" class="fa fa-calendar"></i>
<time datetime="2022-05-06T16:18:24+08:00">
                2022 å¹´ 5 æœˆ 6 æ—¥
              </time>
</span>
<span class="reading-time">
<i aria-hidden="true" class="fa fa-clock-o"></i>
              é˜…è¯»æ—¶é—´ï¼š4 åˆ†é’Ÿ
            </span>
</div>
</div>
</header>
<div>
<p>go å®˜æ–¹çš„å¾ˆå¥½çš„å…¥é—¨æ•™ç¨‹ï¼š<a href="https://tour.go-zh.org/list">Go è¯­è¨€ä¹‹æ—…</a></p>
<p>è¿™é‡Œæ˜¯æˆ‘åšçš„æ‰€æœ‰çš„ç»ƒä¹ </p>
<h3 id="å¾ªç¯ä¸å‡½æ•°">
  å¾ªç¯ä¸å‡½æ•°
  <a class="heading-link" href="#%e5%be%aa%e7%8e%af%e4%b8%8e%e5%87%bd%e6%95%b0">
<i aria-hidden="true" class="fa fa-link"></i>
</a>
</h3>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-go" data-lang="go"><span style="font-weight:bold;text-decoration:underline">package</span> main

<span style="font-weight:bold;text-decoration:underline">import</span> (
  <span style="color:#666;font-style:italic">"fmt"</span>
  <span style="color:#666;font-style:italic">"math"</span>
)

<span style="font-weight:bold;font-style:italic;text-decoration:underline">func</span> <span style="color:#666;font-weight:bold;font-style:italic">Sqrt</span>(x <span style="font-weight:bold;text-decoration:underline">float64</span>) <span style="font-weight:bold;text-decoration:underline">float64</span> {
  z := <span style="font-weight:bold;font-style:italic">float64</span>(1)
  <span style="font-weight:bold;text-decoration:underline">for</span> i := 1; i &lt;= 10; i++ {
    change := (z * z - x) / (2 * z)
    <span style="font-weight:bold;text-decoration:underline">if</span> math.<span style="color:#666;font-weight:bold;font-style:italic">Abs</span>(change) &lt; 1e-13 {
      <span style="font-weight:bold;text-decoration:underline">break</span>
    }
    z -= change
  }
  <span style="font-weight:bold;text-decoration:underline">return</span> z
}

<span style="font-weight:bold;font-style:italic;text-decoration:underline">func</span> <span style="color:#666;font-weight:bold;font-style:italic">main</span>() {
  fmt.<span style="color:#666;font-weight:bold;font-style:italic">Println</span>(<span style="color:#666;font-weight:bold;font-style:italic">Sqrt</span>(2))
  fmt.<span style="color:#666;font-weight:bold;font-style:italic">Println</span>(math.<span style="color:#666;font-weight:bold;font-style:italic">Sqrt</span>(2))
}
</code></pre></div><h3 id="åˆ‡ç‰‡">
  åˆ‡ç‰‡
  <a class="heading-link" href="#%e5%88%87%e7%89%87">
<i aria-hidden="true" class="fa fa-link"></i>
</a>
</h3>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-go" data-lang="go"><span style="font-weight:bold;text-decoration:underline">package</span> main

<span style="font-weight:bold;text-decoration:underline">import</span> <span style="color:#666;font-style:italic">"golang.org/x/tour/pic"</span>
<span style="font-weight:bold;text-decoration:underline">import</span> <span style="color:#666;font-style:italic">"math"</span>

<span style="font-weight:bold;font-style:italic;text-decoration:underline">func</span> <span style="color:#666;font-weight:bold;font-style:italic">Pic</span>(dx, dy <span style="font-weight:bold;text-decoration:underline">int</span>) [][]<span style="font-weight:bold;text-decoration:underline">uint8</span> {
  <span style="font-weight:bold;font-style:italic;text-decoration:underline">var</span> img = <span style="font-weight:bold;font-style:italic">make</span>([][]<span style="font-weight:bold;text-decoration:underline">uint8</span>, dy)
  <span style="font-weight:bold;text-decoration:underline">for</span> i := 0; i &lt; dy; i++ {
    img[i] = <span style="font-weight:bold;font-style:italic">make</span>([]<span style="font-weight:bold;text-decoration:underline">uint8</span>, dx)
    <span style="font-weight:bold;text-decoration:underline">for</span> j := 0; j &lt; dx; j++ {
      img[i][j] = <span style="font-weight:bold;font-style:italic">uint8</span>(<span style="font-weight:bold;font-style:italic">float64</span>(i) * math.<span style="color:#666;font-weight:bold;font-style:italic">Log</span>(<span style="font-weight:bold;font-style:italic">float64</span>(j)))
    }
  }
  <span style="font-weight:bold;text-decoration:underline">return</span> img
}

<span style="font-weight:bold;font-style:italic;text-decoration:underline">func</span> <span style="color:#666;font-weight:bold;font-style:italic">main</span>() {
  pic.<span style="color:#666;font-weight:bold;font-style:italic">Show</span>(Pic)
}
</code></pre></div><h3 id="æ˜ å°„">
  æ˜ å°„
  <a class="heading-link" href="#%e6%98%a0%e5%b0%84">
<i aria-hidden="true" class="fa fa-link"></i>
</a>
</h3>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-go" data-lang="go"><span style="font-weight:bold;text-decoration:underline">package</span> main 

<span style="font-weight:bold;text-decoration:underline">import</span> (
  <span style="color:#666;font-style:italic">"strings"</span>
  <span style="color:#666;font-style:italic">"golang.org/x/tour/wc"</span>
)

<span style="font-weight:bold;font-style:italic;text-decoration:underline">func</span> <span style="color:#666;font-weight:bold;font-style:italic">WordCount</span>(s <span style="font-weight:bold;text-decoration:underline">string</span>) <span style="font-weight:bold;font-style:italic;text-decoration:underline">map</span>[<span style="font-weight:bold;text-decoration:underline">string</span>]<span style="font-weight:bold;text-decoration:underline">int</span> {
  wc := <span style="font-weight:bold;font-style:italic">make</span>(<span style="font-weight:bold;font-style:italic;text-decoration:underline">map</span>[<span style="font-weight:bold;text-decoration:underline">string</span>]<span style="font-weight:bold;text-decoration:underline">int</span>)
  list := strings.<span style="color:#666;font-weight:bold;font-style:italic">Fields</span>(s)

  <span style="font-weight:bold;text-decoration:underline">for</span> _, v := <span style="font-weight:bold;text-decoration:underline">range</span> list {
    wc[v]++;
  }

  <span style="font-weight:bold;text-decoration:underline">return</span> wc
}

<span style="font-weight:bold;font-style:italic;text-decoration:underline">func</span> <span style="color:#666;font-weight:bold;font-style:italic">main</span>() {
  wc.<span style="color:#666;font-weight:bold;font-style:italic">Test</span>(WordCount)
}
</code></pre></div><h3 id="æ–æ³¢çº³å¥‘é—­åŒ…">
  æ–æ³¢çº³å¥‘é—­åŒ…
  <a class="heading-link" href="#%e6%96%90%e6%b3%a2%e7%ba%b3%e5%a5%91%e9%97%ad%e5%8c%85">
<i aria-hidden="true" class="fa fa-link"></i>
</a>
</h3>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-go" data-lang="go"><span style="font-weight:bold;text-decoration:underline">package</span> main 

<span style="font-weight:bold;text-decoration:underline">import</span> (
  <span style="color:#666;font-style:italic">"fmt"</span>
)

<span style="font-weight:bold;font-style:italic;text-decoration:underline">func</span> <span style="color:#666;font-weight:bold;font-style:italic">fibonacci</span>() <span style="font-weight:bold;font-style:italic;text-decoration:underline">func</span>() <span style="font-weight:bold;text-decoration:underline">int</span> {
  v1, v2 := 0, 1
  <span style="font-weight:bold;text-decoration:underline">return</span> <span style="font-weight:bold;font-style:italic;text-decoration:underline">func</span>() <span style="font-weight:bold;text-decoration:underline">int</span> {
    <span style="font-weight:bold;text-decoration:underline">defer</span> <span style="font-weight:bold;font-style:italic;text-decoration:underline">func</span>(tv1 <span style="font-weight:bold;text-decoration:underline">int</span>) { v2 = tv1 + v2 }(v1)
    <span style="font-weight:bold;text-decoration:underline">defer</span> <span style="font-weight:bold;font-style:italic;text-decoration:underline">func</span>() { v1 = v2 }()
    <span style="font-weight:bold;text-decoration:underline">return</span> v1
  }
}

<span style="font-weight:bold;font-style:italic;text-decoration:underline">func</span> <span style="color:#666;font-weight:bold;font-style:italic">main</span>() {
  f := <span style="color:#666;font-weight:bold;font-style:italic">fibonacci</span>()
  <span style="font-weight:bold;text-decoration:underline">for</span> i := 0; i &lt; 10; i++ {
    fmt.<span style="color:#666;font-weight:bold;font-style:italic">Println</span>(<span style="color:#666;font-weight:bold;font-style:italic">f</span>())
  }
}
</code></pre></div><h3 id="stringer">
  Stringer
  <a class="heading-link" href="#stringer">
<i aria-hidden="true" class="fa fa-link"></i>
</a>
</h3>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-go" data-lang="go"><span style="font-weight:bold;text-decoration:underline">package</span> main

<span style="font-weight:bold;text-decoration:underline">import</span> <span style="color:#666;font-style:italic">"fmt"</span>

<span style="font-weight:bold;font-style:italic;text-decoration:underline">type</span> IPAddr [4]<span style="font-weight:bold;text-decoration:underline">byte</span>

<span style="font-weight:bold;font-style:italic;text-decoration:underline">func</span> (ip IPAddr) <span style="color:#666;font-weight:bold;font-style:italic">String</span>() <span style="font-weight:bold;text-decoration:underline">string</span> {
  <span style="font-weight:bold;text-decoration:underline">return</span> fmt.<span style="color:#666;font-weight:bold;font-style:italic">Sprintf</span>(<span style="color:#666;font-style:italic">"%v.%v.%v.%v"</span>, ip[0], ip[1], ip[2], ip[3])
}

<span style="font-weight:bold;font-style:italic;text-decoration:underline">func</span> <span style="color:#666;font-weight:bold;font-style:italic">main</span>() {
	hosts := <span style="font-weight:bold;font-style:italic;text-decoration:underline">map</span>[<span style="font-weight:bold;text-decoration:underline">string</span>]IPAddr{
		<span style="color:#666;font-style:italic">"loopback"</span>:  {127, 0, 0, 1},
		<span style="color:#666;font-style:italic">"googleDNS"</span>: {8, 8, 8, 8},
	}
	<span style="font-weight:bold;text-decoration:underline">for</span> name, ip := <span style="font-weight:bold;text-decoration:underline">range</span> hosts {
		fmt.<span style="color:#666;font-weight:bold;font-style:italic">Printf</span>(<span style="color:#666;font-style:italic">"%v: %v\n"</span>, name, ip)
	}
}
</code></pre></div><h3 id="é”™è¯¯">
  é”™è¯¯
  <a class="heading-link" href="#%e9%94%99%e8%af%af">
<i aria-hidden="true" class="fa fa-link"></i>
</a>
</h3>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-go" data-lang="go"><span style="font-weight:bold;text-decoration:underline">package</span> main

<span style="font-weight:bold;text-decoration:underline">import</span> (
  <span style="color:#666;font-style:italic">"fmt"</span>
  <span style="color:#666;font-style:italic">"math"</span>
)

<span style="font-weight:bold;font-style:italic;text-decoration:underline">type</span> ErrNegativeSqrt <span style="font-weight:bold;text-decoration:underline">float64</span>

<span style="font-weight:bold;font-style:italic;text-decoration:underline">func</span> (e ErrNegativeSqrt) <span style="color:#666;font-weight:bold;font-style:italic">Error</span>() <span style="font-weight:bold;text-decoration:underline">string</span> {
  v := <span style="font-weight:bold;font-style:italic">float64</span>(e)
  <span style="font-weight:bold;text-decoration:underline">return</span> fmt.<span style="color:#666;font-weight:bold;font-style:italic">Sprintf</span>(<span style="color:#666;font-style:italic">"cannot Sqrt negative number: %v"</span>, v)
}

<span style="font-weight:bold;font-style:italic;text-decoration:underline">func</span> <span style="color:#666;font-weight:bold;font-style:italic">Sqrt</span>(x <span style="font-weight:bold;text-decoration:underline">float64</span>) (<span style="font-weight:bold;text-decoration:underline">float64</span>, <span style="font-weight:bold;text-decoration:underline">error</span>) {
  <span style="font-weight:bold;text-decoration:underline">if</span> x &lt; 0 {
    <span style="font-weight:bold;text-decoration:underline">return</span> 0, <span style="color:#666;font-weight:bold;font-style:italic">ErrNegativeSqrt</span>(x)
  }
	z := <span style="font-weight:bold;font-style:italic">float64</span>(1)
	<span style="font-weight:bold;text-decoration:underline">for</span> i := 1; i &lt;= 10; i++ {
		change := (z * z - x) / (2 * z)
		<span style="font-weight:bold;text-decoration:underline">if</span> math.<span style="color:#666;font-weight:bold;font-style:italic">Abs</span>(change) &lt; 1e-13 {
			<span style="font-weight:bold;text-decoration:underline">break</span>
		}
		z -= change
	}
	<span style="font-weight:bold;text-decoration:underline">return</span> z, <span style="font-weight:bold;text-decoration:underline">nil</span>
}

<span style="font-weight:bold;font-style:italic;text-decoration:underline">func</span> <span style="color:#666;font-weight:bold;font-style:italic">main</span>() {
	fmt.<span style="color:#666;font-weight:bold;font-style:italic">Println</span>(<span style="color:#666;font-weight:bold;font-style:italic">Sqrt</span>(2))
	fmt.<span style="color:#666;font-weight:bold;font-style:italic">Println</span>(<span style="color:#666;font-weight:bold;font-style:italic">Sqrt</span>(-2))
}
</code></pre></div><h3 id="reader">
  Reader
  <a class="heading-link" href="#reader">
<i aria-hidden="true" class="fa fa-link"></i>
</a>
</h3>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-go" data-lang="go"><span style="font-weight:bold;text-decoration:underline">package</span> main

<span style="font-weight:bold;text-decoration:underline">import</span> <span style="color:#666;font-style:italic">"golang.org/x/tour/reader"</span>

<span style="font-weight:bold;font-style:italic;text-decoration:underline">type</span> MyReader <span style="font-weight:bold;font-style:italic;text-decoration:underline">struct</span>{}

<span style="color:#888;font-style:italic">// TODO: ç»™ MyReader æ·»åŠ ä¸€ä¸ª Read([]byte) (int, error) æ–¹æ³•
</span><span style="color:#888;font-style:italic"></span><span style="font-weight:bold;font-style:italic;text-decoration:underline">func</span> (r MyReader) <span style="color:#666;font-weight:bold;font-style:italic">Read</span>(v []<span style="font-weight:bold;text-decoration:underline">byte</span>) (<span style="font-weight:bold;text-decoration:underline">int</span>, <span style="font-weight:bold;text-decoration:underline">error</span>) {
	<span style="font-weight:bold;text-decoration:underline">for</span> i := 0; i &lt; <span style="font-weight:bold;font-style:italic">len</span>(v); i++ {
		v[i] = <span style="color:#666;font-style:italic">'A'</span>
	}
	<span style="font-weight:bold;text-decoration:underline">return</span> <span style="font-weight:bold;font-style:italic">len</span>(v), <span style="font-weight:bold;text-decoration:underline">nil</span>
}

<span style="font-weight:bold;font-style:italic;text-decoration:underline">func</span> <span style="color:#666;font-weight:bold;font-style:italic">main</span>() {
	reader.<span style="color:#666;font-weight:bold;font-style:italic">Validate</span>(MyReader{})
}
</code></pre></div><h3 id="ç­‰ä»·äºŒå‰æŸ¥æ‰¾æ ‘">
  ç­‰ä»·äºŒå‰æŸ¥æ‰¾æ ‘
  <a class="heading-link" href="#%e7%ad%89%e4%bb%b7%e4%ba%8c%e5%8f%89%e6%9f%a5%e6%89%be%e6%a0%91">
<i aria-hidden="true" class="fa fa-link"></i>
</a>
</h3>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-go" data-lang="go"><span style="font-weight:bold;text-decoration:underline">package</span> main

<span style="font-weight:bold;text-decoration:underline">import</span> <span style="color:#666;font-style:italic">"golang.org/x/tour/tree"</span>
<span style="font-weight:bold;text-decoration:underline">import</span> <span style="color:#666;font-style:italic">"fmt"</span>

<span style="color:#888;font-style:italic">// Walk æ­¥è¿› tree t å°†æ‰€æœ‰çš„å€¼ä» tree å‘é€åˆ° channel chã€‚
</span><span style="color:#888;font-style:italic"></span><span style="font-weight:bold;font-style:italic;text-decoration:underline">func</span> <span style="color:#666;font-weight:bold;font-style:italic">Walk</span>(t *tree.Tree, ch <span style="font-weight:bold;font-style:italic;text-decoration:underline">chan</span> <span style="font-weight:bold;text-decoration:underline">int</span>) {
	<span style="font-weight:bold;text-decoration:underline">if</span> t.Left != <span style="font-weight:bold;text-decoration:underline">nil</span> {
		<span style="color:#666;font-weight:bold;font-style:italic">Walk</span>(t.Left, ch)
	}
	ch &lt;- t.Value
	<span style="font-weight:bold;text-decoration:underline">if</span> t.Right != <span style="font-weight:bold;text-decoration:underline">nil</span> {
		<span style="color:#666;font-weight:bold;font-style:italic">Walk</span>(t.Right, ch)
	}
}

<span style="color:#888;font-style:italic">// Same æ£€æµ‹æ ‘ t1 å’Œ t2 æ˜¯å¦å«æœ‰ç›¸åŒçš„å€¼ã€‚
</span><span style="color:#888;font-style:italic"></span><span style="font-weight:bold;font-style:italic;text-decoration:underline">func</span> <span style="color:#666;font-weight:bold;font-style:italic">Same</span>(t1, t2 *tree.Tree) <span style="font-weight:bold;text-decoration:underline">bool</span> {
	ch1 := <span style="font-weight:bold;font-style:italic">make</span>(<span style="font-weight:bold;font-style:italic;text-decoration:underline">chan</span> <span style="font-weight:bold;text-decoration:underline">int</span>)
	ch2 := <span style="font-weight:bold;font-style:italic">make</span>(<span style="font-weight:bold;font-style:italic;text-decoration:underline">chan</span> <span style="font-weight:bold;text-decoration:underline">int</span>)
	<span style="font-weight:bold;text-decoration:underline">go</span> <span style="font-weight:bold;font-style:italic;text-decoration:underline">func</span>() { 
		<span style="color:#666;font-weight:bold;font-style:italic">Walk</span>(t1, ch1)
		<span style="font-weight:bold;font-style:italic">close</span>(ch1) 
	}()
	<span style="font-weight:bold;text-decoration:underline">go</span> <span style="font-weight:bold;font-style:italic;text-decoration:underline">func</span>(){
		<span style="color:#666;font-weight:bold;font-style:italic">Walk</span>(t2, ch2)
		<span style="font-weight:bold;font-style:italic">close</span>(ch2)
	}()
	<span style="font-weight:bold;text-decoration:underline">for</span> {
		v1, ok1 := &lt;- ch1
		v2, ok2 := &lt;- ch2
		
		<span style="font-weight:bold;text-decoration:underline">if</span> ok1 != ok2 {
			<span style="font-weight:bold;text-decoration:underline">return</span> <span style="font-weight:bold;text-decoration:underline">false</span>
		}
		
		<span style="font-weight:bold;text-decoration:underline">if</span> ok1 == <span style="font-weight:bold;text-decoration:underline">false</span> {
			<span style="font-weight:bold;text-decoration:underline">break</span>
		}
		
		<span style="font-weight:bold;text-decoration:underline">if</span> v1 != v2 {
			<span style="font-weight:bold;text-decoration:underline">return</span> <span style="font-weight:bold;text-decoration:underline">false</span>
		}
	}
	<span style="font-weight:bold;text-decoration:underline">return</span> <span style="font-weight:bold;text-decoration:underline">true</span>
}

<span style="font-weight:bold;font-style:italic;text-decoration:underline">func</span> <span style="color:#666;font-weight:bold;font-style:italic">main</span>() {
	fmt.<span style="color:#666;font-weight:bold;font-style:italic">Println</span>(<span style="color:#666;font-weight:bold;font-style:italic">Same</span>(tree.<span style="color:#666;font-weight:bold;font-style:italic">New</span>(1), tree.<span style="color:#666;font-weight:bold;font-style:italic">New</span>(1)))
}
</code></pre></div><h3 id="web-çˆ¬è™«">
  Web çˆ¬è™«
  <a class="heading-link" href="#web-%e7%88%ac%e8%99%ab">
<i aria-hidden="true" class="fa fa-link"></i>
</a>
</h3>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4" tabindex="0"><code class="language-go" data-lang="go"><span style="font-weight:bold;text-decoration:underline">package</span> main

<span style="font-weight:bold;text-decoration:underline">import</span> (
	<span style="color:#666;font-style:italic">"fmt"</span>
	<span style="color:#666;font-style:italic">"sync"</span>
)

<span style="font-weight:bold;font-style:italic;text-decoration:underline">type</span> Fetcher <span style="font-weight:bold;font-style:italic;text-decoration:underline">interface</span> {
	<span style="color:#888;font-style:italic">// Fetch è¿”å› URL çš„ body å†…å®¹ï¼Œå¹¶ä¸”å°†åœ¨è¿™ä¸ªé¡µé¢ä¸Šæ‰¾åˆ°çš„ URL æ”¾åˆ°ä¸€ä¸ª slice ä¸­ã€‚
</span><span style="color:#888;font-style:italic"></span>	<span style="color:#666;font-weight:bold;font-style:italic">Fetch</span>(url <span style="font-weight:bold;text-decoration:underline">string</span>) (body <span style="font-weight:bold;text-decoration:underline">string</span>, urls []<span style="font-weight:bold;text-decoration:underline">string</span>, err <span style="font-weight:bold;text-decoration:underline">error</span>)
}

<span style="font-weight:bold;font-style:italic;text-decoration:underline">type</span> MuxMap <span style="font-weight:bold;font-style:italic;text-decoration:underline">struct</span> {
	mux sync.Mutex
	visit <span style="font-weight:bold;font-style:italic;text-decoration:underline">map</span>[<span style="font-weight:bold;text-decoration:underline">string</span>]<span style="font-weight:bold;text-decoration:underline">bool</span>
}

<span style="font-weight:bold;font-style:italic;text-decoration:underline">var</span> pbmap = MuxMap{visit: <span style="font-weight:bold;font-style:italic">make</span>(<span style="font-weight:bold;font-style:italic;text-decoration:underline">map</span>[<span style="font-weight:bold;text-decoration:underline">string</span>]<span style="font-weight:bold;text-decoration:underline">bool</span>)}

<span style="color:#888;font-style:italic">// Crawl ä½¿ç”¨ fetcher ä»æŸä¸ª URL å¼€å§‹é€’å½’çš„çˆ¬å–é¡µé¢ï¼Œç›´åˆ°è¾¾åˆ°æœ€å¤§æ·±åº¦ã€‚
</span><span style="color:#888;font-style:italic"></span><span style="font-weight:bold;font-style:italic;text-decoration:underline">func</span> <span style="color:#666;font-weight:bold;font-style:italic">Crawl</span>(url <span style="font-weight:bold;text-decoration:underline">string</span>, depth <span style="font-weight:bold;text-decoration:underline">int</span>, fetcher Fetcher) {
	<span style="color:#888;font-style:italic">// TODO: å¹¶è¡Œçš„æŠ“å– URLã€‚
</span><span style="color:#888;font-style:italic"></span>	<span style="color:#888;font-style:italic">// TODO: ä¸é‡å¤æŠ“å–é¡µé¢ã€‚
</span><span style="color:#888;font-style:italic"></span>        <span style="color:#888;font-style:italic">// ä¸‹é¢å¹¶æ²¡æœ‰å®ç°ä¸Šé¢ä¸¤ç§æƒ…å†µï¼š
</span><span style="color:#888;font-style:italic"></span>	<span style="font-weight:bold;text-decoration:underline">if</span> depth &lt;= 0 {
		<span style="font-weight:bold;text-decoration:underline">return</span>
	}
	body, urls, err := fetcher.<span style="color:#666;font-weight:bold;font-style:italic">Fetch</span>(url)
	<span style="font-weight:bold;text-decoration:underline">if</span> err != <span style="font-weight:bold;text-decoration:underline">nil</span> {
		fmt.<span style="color:#666;font-weight:bold;font-style:italic">Println</span>(err)
		<span style="font-weight:bold;text-decoration:underline">return</span>
	}
	pbmap.mux.<span style="color:#666;font-weight:bold;font-style:italic">Lock</span>()
	pbmap.visit[url] = <span style="font-weight:bold;text-decoration:underline">true</span>
	pbmap.mux.<span style="color:#666;font-weight:bold;font-style:italic">Unlock</span>()
	fmt.<span style="color:#666;font-weight:bold;font-style:italic">Printf</span>(<span style="color:#666;font-style:italic">"found: %s %q\n"</span>, url, body)
	
	<span style="font-weight:bold;text-decoration:underline">for</span> _, u := <span style="font-weight:bold;text-decoration:underline">range</span> urls {
		pbmap.mux.<span style="color:#666;font-weight:bold;font-style:italic">Lock</span>()
		able := pbmap.visit[u]
		pbmap.mux.<span style="color:#666;font-weight:bold;font-style:italic">Unlock</span>()
		<span style="font-weight:bold;text-decoration:underline">if</span> able {
			<span style="font-weight:bold;text-decoration:underline">continue</span>
		}
		<span style="color:#666;font-weight:bold;font-style:italic">Crawl</span>(u, depth-1, fetcher)
	}
	<span style="font-weight:bold;text-decoration:underline">return</span>
}

<span style="font-weight:bold;font-style:italic;text-decoration:underline">func</span> <span style="color:#666;font-weight:bold;font-style:italic">main</span>() {
	<span style="color:#666;font-weight:bold;font-style:italic">Crawl</span>(<span style="color:#666;font-style:italic">"https://golang.org/"</span>, 4, fetcher)
}

<span style="color:#888;font-style:italic">// fakeFetcher æ˜¯è¿”å›è‹¥å¹²ç»“æœçš„ Fetcherã€‚
</span><span style="color:#888;font-style:italic"></span><span style="font-weight:bold;font-style:italic;text-decoration:underline">type</span> fakeFetcher <span style="font-weight:bold;font-style:italic;text-decoration:underline">map</span>[<span style="font-weight:bold;text-decoration:underline">string</span>]*fakeResult

<span style="font-weight:bold;font-style:italic;text-decoration:underline">type</span> fakeResult <span style="font-weight:bold;font-style:italic;text-decoration:underline">struct</span> {
	body <span style="font-weight:bold;text-decoration:underline">string</span>
	urls []<span style="font-weight:bold;text-decoration:underline">string</span>
}

<span style="font-weight:bold;font-style:italic;text-decoration:underline">func</span> (f fakeFetcher) <span style="color:#666;font-weight:bold;font-style:italic">Fetch</span>(url <span style="font-weight:bold;text-decoration:underline">string</span>) (<span style="font-weight:bold;text-decoration:underline">string</span>, []<span style="font-weight:bold;text-decoration:underline">string</span>, <span style="font-weight:bold;text-decoration:underline">error</span>) {
	<span style="font-weight:bold;text-decoration:underline">if</span> res, ok := f[url]; ok {
		<span style="font-weight:bold;text-decoration:underline">return</span> res.body, res.urls, <span style="font-weight:bold;text-decoration:underline">nil</span>
	}
	<span style="font-weight:bold;text-decoration:underline">return</span> <span style="color:#666;font-style:italic">""</span>, <span style="font-weight:bold;text-decoration:underline">nil</span>, fmt.<span style="color:#666;font-weight:bold;font-style:italic">Errorf</span>(<span style="color:#666;font-style:italic">"not found: %s"</span>, url)
}

<span style="color:#888;font-style:italic">// fetcher æ˜¯å¡«å……åçš„ fakeFetcherã€‚
</span><span style="color:#888;font-style:italic"></span><span style="font-weight:bold;font-style:italic;text-decoration:underline">var</span> fetcher = fakeFetcher{
	<span style="color:#666;font-style:italic">"https://golang.org/"</span>: &amp;fakeResult{
		<span style="color:#666;font-style:italic">"The Go Programming Language"</span>,
		[]<span style="font-weight:bold;text-decoration:underline">string</span>{
			<span style="color:#666;font-style:italic">"https://golang.org/pkg/"</span>,
			<span style="color:#666;font-style:italic">"https://golang.org/cmd/"</span>,
		},
	},
	<span style="color:#666;font-style:italic">"https://golang.org/pkg/"</span>: &amp;fakeResult{
		<span style="color:#666;font-style:italic">"Packages"</span>,
		[]<span style="font-weight:bold;text-decoration:underline">string</span>{
			<span style="color:#666;font-style:italic">"https://golang.org/"</span>,
			<span style="color:#666;font-style:italic">"https://golang.org/cmd/"</span>,
			<span style="color:#666;font-style:italic">"https://golang.org/pkg/fmt/"</span>,
			<span style="color:#666;font-style:italic">"https://golang.org/pkg/os/"</span>,
		},
	},
	<span style="color:#666;font-style:italic">"https://golang.org/pkg/fmt/"</span>: &amp;fakeResult{
		<span style="color:#666;font-style:italic">"Package fmt"</span>,
		[]<span style="font-weight:bold;text-decoration:underline">string</span>{
			<span style="color:#666;font-style:italic">"https://golang.org/"</span>,
			<span style="color:#666;font-style:italic">"https://golang.org/pkg/"</span>,
		},
	},
	<span style="color:#666;font-style:italic">"https://golang.org/pkg/os/"</span>: &amp;fakeResult{
		<span style="color:#666;font-style:italic">"Package os"</span>,
		[]<span style="font-weight:bold;text-decoration:underline">string</span>{
			<span style="color:#666;font-style:italic">"https://golang.org/"</span>,
			<span style="color:#666;font-style:italic">"https://golang.org/pkg/"</span>,
		},
	},
}
</code></pre></div>
</div>
<footer>
</footer>
</article>
<h1 style="text-align: center;">èµåŠ©åŒº</h1>
<div style="display: flex; flex-wrap: wrap; ">
<img src="https://ccviolett-1307804825.cos.ap-shanghai.myqcloud.com/img/202205142210866.png/w200" style="margin: 1rem"/>
<img src="https://ccviolett-1307804825.cos.ap-shanghai.myqcloud.com/img/202205142210865.jpg/w200" style="margin: 1rem"/>
<img src="https://ccviolett-1307804825.cos.ap-shanghai.myqcloud.com/img/202205142210864.png/w200" style="margin: 1rem"/>
<p>å¦‚æœè§‰å¾—æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå¯ä»¥ç»™ä½œè€…ä¹°æ¯å’–å•¡ã€‚ä½œè€…éå¸¸æ„Ÿè°¢ä½ çš„æ”¯æŒï¼Œä½ çš„æ¯ä¸€ç‚¹ç‚¹æ¿€åŠ±éƒ½æ˜¯ä½œè€…ä¸æ–­åˆ›ä½œçš„åŠ¨åŠ›ã€‚</p>
<p>æ‰€æœ‰æ”¶åˆ°çš„èµåŠ©éƒ½å°†åœ¨<a href="/support">æ”¶åˆ°çš„èµåŠ©</a>é‡Œæ˜¾ç¤ºï¼Œä½ å¯ä»¥åœ¨æ”¯ä»˜æ—¶ç•™ä¸‹å¤‡æ³¨ã€‚</p>
</div>
<h1 style="text-align: center;">è¯„è®ºåŒº</h1>
<p>æ¬¢è¿å¤§å®¶åœ¨ä¸‹é¢å¤šå¤šè¯„è®ºï¼š</p>
<script src="//unpkg.com/valine/dist/Valine.min.js"></script>
<div id="vcomments"></div>
<script>
        new Valine({
            el: '#vcomments',
            appId: 'pKI8zxDMRprnFwEiUfoQF3tV-gzGzoHsz',
            appKey: 'xy8f32RhY529hvUDA8Ih165N',
            avatar: 'mp'
        })
    </script>
</section>
</div>
<footer class="footer">
<section class="container">
<p>æ„¿ä½ æˆä¸ºè‡ªå·±çš„å¤ªé˜³ï¼Œæ— éœ€å€ŸåŠ©åˆ«äººçš„å…‰ã€‚åšå®¢æ¥å—å¤§ä¼—æŠ•ç¨¿ï¼Œè”ç³»QQ 3340751717ã€‚</p>
      
      
        Â©
        
        2022
         ç½—æ½‡é˜³ 
      
      
         Â· 
        æŠ€æœ¯æ”¯æŒ <a href="https://gohugo.io/">Hugo</a> &amp; <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.
      
      
        
      
    </section>
</footer>
<script async="" crossorigin="anonymous" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4610306996952179"></script>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" rel="stylesheet"/>
<script crossorigin="anonymous" defer="" integrity="sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY" src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js"></script>
<script crossorigin="anonymous" defer="" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          
          
          delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '$', right: '$', display: false},
              {left: '\\(', right: '\\)', display: false},
              {left: '\\[', right: '\\]', display: true}
          ],
          
          throwOnError : false
        });
    });
</script>
</main>
<script integrity="sha256-A7F3afT5GuNWZ+HyocqMFvUFYlds+Q/zKzF5kmkU2qU=" src="/js/coder.min.03b17769f4f91ae35667e1f2a1ca8c16f50562576cf90ff32b3179926914daa5.js"></script>
</body>
</html>
